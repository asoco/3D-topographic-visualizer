{"version":3,"file":"bundle.1625df96f9b522fe2667.js","mappings":"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","sources":["webpack:///webpack/bootstrap","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/publicPath","webpack:///webpack/runtime/importScripts chunk loading","webpack:///./src/js/workers/laz-loader-worker.js"],"sourcesContent":["// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = self.location + \"\";\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t790: 1\n};\n\n// no chunk install function needed\n// no chunk loading\n\n// no HMR\n\n// no HMR manifest","// laz-loader-worker.js\n//\n// if( 'undefined' === typeof window){\n\timportScripts(new URL('./laz-perf.js', import.meta.url));\n// }\n\nvar instance = null; // laz-perf instance\n\nfunction readAs(buf, Type, offset, count) {\n\tcount = (count === undefined || count === 0 ? 1 : count);\n\tvar sub = buf.slice(offset, offset + Type.BYTES_PER_ELEMENT * count);\n\n\tvar r = new Type(sub);\n\tif (count === undefined || count === 1)\n\t\treturn r[0];\n\n\tvar ret = [];\n\tfor (var i = 0 ; i < count ; i ++) {\n\t\tret.push(r[i]);\n\t}\n\n\treturn ret;\n}\n\nfunction parseLASHeader(arraybuffer) {\n\tvar o = {};\n\n\to.pointsOffset = readAs(arraybuffer, Uint32Array, 32*3);\n\to.pointsFormatId = readAs(arraybuffer, Uint8Array, 32*3+8);\n\to.pointsStructSize = readAs(arraybuffer, Uint16Array, 32*3+8+1);\n\to.pointsCount = readAs(arraybuffer, Uint32Array, 32*3 + 11);\n\n\n\tvar start = 32*3 + 35;\n\to.scale = readAs(arraybuffer, Float64Array, start, 3); start += 24; // 8*3\n\to.offset = readAs(arraybuffer, Float64Array, start, 3); start += 24;\n\n\tvar bounds = readAs(arraybuffer, Float64Array, start, 6); start += 48; // 8*6;\n\to.maxs = [bounds[0], bounds[2], bounds[4]];\n\to.mins = [bounds[1], bounds[3], bounds[5]];\n\n\treturn o;\n}\n\nfunction handleEvent(msg) {\n\tswitch(msg.type) {\n\t\tcase \"open\":\n\t\t\ttry {\n\t\t\t\tinstance = new Module.LASZip();\n\t\t\t\tvar abInt = new Uint8Array(msg.arraybuffer);\n\t\t\t\tvar buf = Module._malloc(msg.arraybuffer.byteLength);\n\n\t\t\t\tinstance.arraybuffer = msg.arraybuffer;\n\t\t\t\tinstance.buf = buf;\n\t\t\t\tModule.HEAPU8.set(abInt, buf);\n\t\t\t\tinstance.open(buf, msg.arraybuffer.byteLength);\n\n\t\t\t\tinstance.readOffset = 0;\n\n\t\t\t\tpostMessage({ type: \"open\", status: 1});\n\t\t\t}\n\t\t\tcatch(e) {\n\t\t\t\tpostMessage({ type: \"open\", status: 0, details: e });\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase \"header\":\n\t\t\tif (!instance)\n\t\t\t\tthrow new Error(\"You need to open the file before trying to read header\");\n\n\n\n\t\t\tvar header = parseLASHeader(instance.arraybuffer);\n\t\t\theader.pointsFormatId &= 0x3f;\n\t\t\tinstance.header = header;\n\t\t\tpostMessage({type: \"header\", status: 1, header: header});\n\t\t\tbreak;\n\n\t\tcase \"read\":\n\t\t\tif (!instance)\n\t\t\t\tthrow new Error(\"You need to open the file before trying to read stuff\");\n\n\t\t\tvar start = msg.start, count = msg.count, skip = msg.skip;\n\t\t\tvar o = instance;\n\n\t\t\tif (!o.header)\n\t\t\t\tthrow new Error(\"You need to query header before reading, I maintain state that way, sorry :(\");\n\n\t\t\tvar pointsToRead = Math.min(count * skip, o.header.pointsCount - o.readOffset);\n\t\t\tvar bufferSize = Math.ceil(pointsToRead / skip);\n\t\t\tvar pointsRead = 0;\n\n\t\t\tvar this_buf = new Uint8Array(bufferSize * o.header.pointsStructSize);\n\t\t\tvar buf_read = Module._malloc(o.header.pointsStructSize);\n\t\t\tfor (var i = 0 ; i < pointsToRead ; i ++) {\n\t\t\t\to.getPoint(buf_read);\n\n\t\t\t\tif (i % skip === 0) {\n\t\t\t\t\tvar a = new Uint8Array(Module.HEAPU8.buffer, buf_read, o.header.pointsStructSize);\n\t\t\t\t\tthis_buf.set(a, pointsRead * o.header.pointsStructSize, o.header.pointsStructSize);\n\t\t\t\t\tpointsRead ++;\n\t\t\t\t}\n\n\t\t\t\to.readOffset ++;\n\t\t\t}\n\n\t\t\tpostMessage({\n\t\t\t\ttype: 'header',\n\t\t\t\tstatus: 1,\n\t\t\t\tbuffer: this_buf.buffer,\n\t\t\t\tcount: pointsRead,\n\t\t\t\thasMoreData: o.readOffset < o.header.pointsCount\n\t\t\t});\n\n\t\t\tbreak;\n\n\n\t\tcase \"close\":\n\t\t\tif (instance !== null) {\n\t\t\t\tinstance.delete();\n\t\t\t\tinstance = null;\n\t\t\t}\n\t\t\tpostMessage({ type: \"close\", status: 1});\n\t\t\tbreak;\n\t}\n}\n\nonmessage = function(event) {\n\ttry {\n\t\thandleEvent(event.data);\n\t} catch(e) {\n\t\tpostMessage({type: event.data.type, status: 0, details: e});\n\t}\n};\n\n\n"],"names":["__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","g","globalThis","this","Function","e","window","o","obj","prop","Object","prototype","hasOwnProperty","call","scriptUrl","importScripts","location","document","currentScript","src","scripts","getElementsByTagName","length","Error","replace","p","b","self","URL","instance","readAs","buf","Type","offset","count","r","slice","BYTES_PER_ELEMENT","ret","i","push","onmessage","event","msg","type","Module","LASZip","abInt","Uint8Array","arraybuffer","_malloc","byteLength","HEAPU8","set","open","readOffset","postMessage","status","details","header","pointsOffset","Uint32Array","pointsFormatId","pointsStructSize","Uint16Array","pointsCount","start","scale","Float64Array","bounds","maxs","mins","parseLASHeader","skip","pointsToRead","Math","min","bufferSize","ceil","pointsRead","this_buf","buf_read","getPoint","a","buffer","hasMoreData","delete","handleEvent","data"],"sourceRoot":""}